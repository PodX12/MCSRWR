<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>MCSR WR Command</title>
    <meta name="description" content="A simple MCSR WR command builder">
    <meta name="author" content="PodX12">

    <!-- <link rel="icon" href="/favicon.ico">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml"> -->
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        h4 {
            margin-top: 30px;
        }
    </style>
</head>

<body>
    <div id="app">
        <header class="p-3 bg-dark text-white">
            <div class="container">
                <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                    <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                        <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                            <use xlink:href="#bootstrap"></use>
                        </svg>
                    </a>
                    <h1>WR Command Generator</h1>
                </div>
            </div>
        </header>
        <div class="container">

            <h4>RSG</h4>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="rsg116" v-model="rsg116"
                    @change="updateCommand()" />
                <label class="form-check-label" for="rsg116">1.16+</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="rsg113to115" v-model="rsg113to115"
                    @change="updateCommand()" />
                <label class="form-check-label" for="rsg113to115">1.13-1.15</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="rsgpre19" v-model="rsgpre19"
                    @change="updateCommand()" />
                <label class="form-check-label" for="rsgpre19">Pre1.9</label>
            </div>

            <h4>SSG</h4>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="ssg116" v-model="ssg116"
                    @change="updateCommand()" />
                <label class="form-check-label" for="ssg116">1.16+</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="ssg113to115" v-model="ssg113to115"
                    @change="updateCommand()" />
                <label class="form-check-label" for="ssg113to115">1.13-1.15</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="ssgpre19" v-model="ssgpre19"
                    @change="updateCommand()" />
                <label class="form-check-label" for="ssgpre19">Pre1.9</label>
            </div>

            <h4>Other Categories</h4>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="aa" v-model="aa" @change="updateCommand()" />
                <label class="form-check-label" for="aa">AA</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="fsg" v-model="fsg" @change="updateCommand()" />
                <label class="form-check-label" for="fsg">FSG</label>
            </div>
            <div class="form-check">
                <input type="checkbox" class="form-check-input" id="icarus" v-model="icarus"
                    @change="updateCommand()" />
                <label class="form-check-label" for="icarus">Icarus</label>
            </div>

            <h4>Separator (includes spacing)</h4>
            <div class="form-group">
                <input type="text" class="form-control" class="txt-box" v-model="separator" @change="updateCommand()" />
            </div>

            <h4>The Command</h4>
            <div class="form-group">
                <input type="text" class="form-control" class="txt-box" v-model="command" />
            </div>

            <h4>Preview</h4>
            <p>{{ preview }}</p>
        </div>

        <script src="https://unpkg.com/vue@3"></script>
    </div>
    <script>
        Vue.createApp({
            data() {
                return {
                    rsg116: true,
                    rsg113to115: false,
                    rsgpre19: false,
                    ssg116: true,
                    ssg113to115: false,
                    ssgpre19: false,
                    aa: false,
                    fsg: false,
                    icarus: false,
                    separator: " | ",
                    command: '',
                    preview: '',
                    wrs: {}
                }
            },
            methods: {
                updateCommand() {
                    var newCommand = "!wr $(eval var r=$(urlfetch json https://podx12.github.io/MCSRWR/data.json);`";

                    if (this.rsg116) {
                        newCommand += '1.16 ${r["RSG"]["1.16+"]}' + this.separator;
                    }
                    if (this.rsg113to115) {
                        newCommand += '1.9-1.15 ${r["RSG"]["1.9-1.15"]}' + this.separator;
                    }
                    if (this.rsgpre19) {
                        newCommand += 'Pre1.9 ${r["RSG"]["Pre1.9"]}' + this.separator;
                    }
                    if (this.ssg116) {
                        newCommand += 'SSG 1.16 ${r["SSG"]["1.16+"]}' + this.separator;
                    }
                    if (this.ssg113to115) {
                        newCommand += 'SSG 1.9-1.15 ${r["SSG"]["1.9-1.15"]}' + this.separator;
                    }
                    if (this.ssgpre19) {
                        newCommand += 'SSG Pre1.9${r["SSG"]["Pre1.9"]}' + this.separator;
                    }
                    if (this.aa) {
                        newCommand += 'AA ${r["AA"]}' + this.separator;
                    }
                    if (this.fsg) {
                        newCommand += 'FSG ${r["FSG"]}' + this.separator;
                    }
                    if (this.icarus) {
                        newCommand += 'Icarus ${r["Icarus"]}' + this.separator;
                    }

                    newCommand = newCommand.substring(0, newCommand.length - this.separator.length) + "`)";

                    this.command = newCommand;
                    this.buildPreview();
                },
                getWrs() {
                    var self = this;
                    var xmlhttp = new XMLHttpRequest();

                    xmlhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            self.wrs = JSON.parse(this.responseText);
                            self.buildPreview();
                        }
                    };
                    xmlhttp.open("GET", "https://podx12.github.io/MCSRWR/data.json", true);
                    xmlhttp.send();
                },
                buildPreview() {
                    if (!this.wrs["RSG"])
                        return;
                    var newPreview = "";
                    var r = this.wrs;

                    if (this.rsg116) {
                        newPreview += `1.16 ${r["RSG"]["1.16+"]}` + this.separator;
                    }
                    if (this.rsg113to115) {
                        newPreview += `1.9-1.15 ${r["RSG"]["1.9-1.15"]}` + this.separator;
                    }
                    if (this.rsgpre19) {
                        newPreview += `Pre1.9 ${r["RSG"]["Pre1.9"]}` + this.separator;
                    }
                    if (this.ssg116) {
                        newPreview += `SSG 1.16 ${r["SSG"]["1.16+"]}` + this.separator;
                    }
                    if (this.ssg113to115) {
                        newPreview += `SSG 1.9-1.15 ${r["SSG"]["1.9-1.15"]}` + this.separator;
                    }
                    if (this.ssgpre19) {
                        newPreview += `SSG Pre1.9${r["SSG"]["Pre1.9"]}` + this.separator;
                    }
                    if (this.aa) {
                        newPreview += `AA ${r["AA"]}` + this.separator;
                    }
                    if (this.fsg) {
                        newPreview += `FSG ${r["FSG"]}` + this.separator;
                    }
                    if (this.icarus) {
                        newPreview += `Icarus ${r["Icarus"]}` + this.separator;
                    }

                    newPreview = newPreview.substring(0, newPreview.length - this.separator.length);

                    this.preview = newPreview;
                }
            },
            mounted() {
                this.updateCommand();
                this.getWrs();
            }
        }).mount('#app')
    </script>
</body>

</html>